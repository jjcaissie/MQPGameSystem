<!DOCTYPE html>

<html>
<head>
    <title> Placeholder </title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='portrait.css')}}"/>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
</head>

<body>
    <div id="content">
        <nav id="main_nav">
            <ul>
                <li><a href="/">Back</a></li>
                <button class="game-button" onclick="showDescription('TwentyQuestions')">20 Questions</button>
                <button class="game-button" onclick="showDescription('placeholder')">Placeholder Game</button>
            </ul>
        </nav>
   <script>
    
    //Show game description for a given game
    function showDescription(gameName)
    {
        const descriptionContainer = document.getElementById('description-container');
        let gameDescription = getGameDescription(gameName);
        let difficultyOption = getGameDifficultyOption(gameName);
        descriptionContainer.innerHTML = 
            '<p>' + gameDescription + '</p>' +
            '<br> ' + difficultyOption + ' </br>' +
            '<form action="#" method="post" id="answer-form">' +
            '<p><input type="hidden" name = "difficulty" id = "difficulty" value = ""></p>' +
            '<button onclick="sendDifficultyValueToServer(); playGame(\'' + gameName + '\')">Play ' + gameName +'</button>' +
            '</form>';
        descriptionContainer.style = 'flex';
    }

    //Get game description given the name of a game
    function getGameDescription(gameName)
    {
        switch (gameName)
        {
            case 'TwentyQuestions':
                return "Take turns guessing the character the other person is " +
                "thinking of. Ask questions in order to narrow down characters!";
            case 'placeholder':
                return 'Place holder description. Other games would be listed here';
            default:
                return 'No game description found'
        }
    }

    //Gets game difficulty options given the name of a game
    function getGameDifficultyOption(gameName)
    {
        switch (gameName)
        {
            case 'TwentyQuestions':
                return '<p>Number of Questions: <span id="questionsValue">20</span></p>' +
                '<input type="range" min="8" max="50" value="20" class="slider" id="difficultySlider" oninput="updateNumberOfQuestionsValue(this.value)">';
            default:
                return 'No game difficulty found';
        }
    }

    //Updates difficulty when user moves slider (if visible)
    function updateDifficultyValue(value)
    {
        document.getElementById('difficultyValue').innerHTML = value;
    }

    //Updates number of questions when user moves slider (if visible)
    function updateNumberOfQuestionsValue(value)
    {
        event.stopPropagation();
        document.getElementById('questionsValue').innerHTML = value;
    }

    //Loads html page for a game given the game name
    function playGame(gameName)
    { 
        const difficulty = document.getElementById('difficultySlider').value;
        window.open(gameName + ".html", "_self");
    }
    
    //Sends difficulty value to be stored server
    function sendDifficultyValueToServer()
    {
        const difficulty = document.getElementById('difficultySlider').value;
        document.getElementById("difficulty").value = difficulty;
    }

    //Closes description container if user clicks (except for slider)
    document.addEventListener('DOMContentLoaded', () => {
    const descriptionContainer = document.getElementById('description-container');

        descriptionContainer.addEventListener('click', (event) => 
        {
            if (!event.target.matches('.slider')) {
                descriptionContainer.style.display = 'none';
            }
        });
    });
   </script>
 </div>
 <div id="description-container"></div>
</body>
</html>